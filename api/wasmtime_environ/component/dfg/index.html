<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A dataflow-graph-like intermediate representation of a component"><title>wasmtime_environ::component::dfg - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-a23c9d150ad85d8b.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="wasmtime_environ" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.0-nightly (6162f6f12 2023-07-01)" data-channel="nightly" data-search-js="search-91b58767224854cb.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ><script src="../../../static.files/storage-59fd9b8ccb335783.js"></script><script defer src="../../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../wasmtime_environ/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../wasmtime_environ/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module dfg</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">wasmtime_environ</a>::<wbr><a href="../index.html">component</a>::<wbr><a class="mod" href="#">dfg</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/wasmtime_environ/component/dfg.rs.html#1-678">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A dataflow-graph-like intermediate representation of a component</p>
<p>This module contains <code>ComponentDfg</code> which is an intermediate step towards
becoming a full-fledged <code>Component</code>. The main purpose for the existence of
this representation of a component is to track dataflow between various
items within a component and support edits to them after the initial inlined
translation of a component.</p>
<p>Currently fused adapters are represented with a core WebAssembly module
which gets “injected” into the final component as-if the component already
bundled it. In doing so the adapter modules need to be partitioned and
inserted into the final sequence of modules to instantiate. While this is
possible to do with a flat <code>GlobalInitializer</code> list it gets unwieldy really
quickly especially when other translation features are added.</p>
<p>This module is largely a duplicate of the <code>component::info</code> module in this
crate. The hierarchy here uses <code>*Id</code> types instead of <code>*Index</code> types to
represent that they don’t have any necessary implicit ordering. Additionally
nothing is kept in an ordered list and instead this is worked with in a
general dataflow fashion where dependencies are walked during processing.</p>
<p>The <code>ComponentDfg::finish</code> method will convert the dataflow graph to a
linearized <code>GlobalInitializer</code> list which is intended to not be edited after
it’s created.</p>
<p>The <code>ComponentDfg</code> is created as part of the <code>component::inline</code> phase of
translation where the dataflow performed there allows identification of
fused adapters, what arguments make their way to core wasm modules, etc.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AdapterId.html" title="struct wasmtime_environ::component::dfg::AdapterId">AdapterId</a></div></li><li><div class="item-name"><a class="struct" href="struct.AdapterModuleId.html" title="struct wasmtime_environ::component::dfg::AdapterModuleId">AdapterModuleId</a></div></li><li><div class="item-name"><a class="struct" href="struct.CanonicalOptions.html" title="struct wasmtime_environ::component::dfg::CanonicalOptions">CanonicalOptions</a></div><div class="desc docblock-short">Same as <code>info::CanonicalOptions</code></div></li><li><div class="item-name"><a class="struct" href="struct.ComponentDfg.html" title="struct wasmtime_environ::component::dfg::ComponentDfg">ComponentDfg</a></div></li><li><div class="item-name"><a class="struct" href="struct.CoreExport.html" title="struct wasmtime_environ::component::dfg::CoreExport">CoreExport</a></div><div class="desc docblock-short">Same as <code>info::CoreExport</code></div></li><li><div class="item-name"><a class="struct" href="struct.InstanceId.html" title="struct wasmtime_environ::component::dfg::InstanceId">InstanceId</a></div></li><li><div class="item-name"><a class="struct" href="struct.Intern.html" title="struct wasmtime_environ::component::dfg::Intern">Intern</a></div><div class="desc docblock-short">A helper structure to “intern” and deduplicate values of type <code>V</code> with an
identifying key <code>K</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.MemoryId.html" title="struct wasmtime_environ::component::dfg::MemoryId">MemoryId</a></div></li><li><div class="item-name"><a class="struct" href="struct.PostReturnId.html" title="struct wasmtime_environ::component::dfg::PostReturnId">PostReturnId</a></div></li><li><div class="item-name"><a class="struct" href="struct.ReallocId.html" title="struct wasmtime_environ::component::dfg::ReallocId">ReallocId</a></div></li><li><div class="item-name"><a class="struct" href="struct.Resource.html" title="struct wasmtime_environ::component::dfg::Resource">Resource</a></div><div class="desc docblock-short">Same as <code>info::Resource</code></div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.CoreDef.html" title="enum wasmtime_environ::component::dfg::CoreDef">CoreDef</a></div><div class="desc docblock-short">Same as <code>info::CoreDef</code>, except has an extra <code>Adapter</code> variant.</div></li><li><div class="item-name"><a class="enum" href="enum.Export.html" title="enum wasmtime_environ::component::dfg::Export">Export</a></div><div class="desc docblock-short">Same as <code>info::Export</code></div></li><li><div class="item-name"><a class="enum" href="enum.Instance.html" title="enum wasmtime_environ::component::dfg::Instance">Instance</a></div><div class="desc docblock-short">Same as <code>info::InstantiateModule</code></div></li><li><div class="item-name"><a class="enum" href="enum.SideEffect.html" title="enum wasmtime_environ::component::dfg::SideEffect">SideEffect</a></div><div class="desc docblock-short">Possible side effects that are possible with instantiating this component.</div></li><li><div class="item-name"><a class="enum" href="enum.Trampoline.html" title="enum wasmtime_environ::component::dfg::Trampoline">Trampoline</a></div><div class="desc docblock-short">Same as <code>info::Trampoline</code></div></li></ul></section></div></main></body></html>